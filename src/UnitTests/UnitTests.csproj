<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
  <Import Project="$(SolutionDir)Drivers\Common.items" />
  <Import Project="..\packages\NUnit3TestAdapter.3.13.0\build\net35\NUnit3TestAdapter.props" Condition="Exists('..\packages\NUnit3TestAdapter.3.13.0\build\net35\NUnit3TestAdapter.props')" />
  <Import Project="..\packages\NUnit.3.11.0\build\NUnit.props" Condition="Exists('..\packages\NUnit.3.11.0\build\NUnit.props')" />
  <PropertyGroup>
    <TargetFramework>net472</TargetFramework>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
    <GenerateBindingRedirectsOutputType>true</GenerateBindingRedirectsOutputType>
    <NuGetPackageImportStamp>
    </NuGetPackageImportStamp>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\Arch\Alpha\Alpha.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Arm\Arm.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Avr\Avr.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Cil\Cil.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\i8051\i8051.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\M6800\M6800.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\M68k.Design\M68k.Design.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\M68k\M68k.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Microchip\MicrochipPIC.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Mips\Mips.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Mos6502\Mos6502.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\MSP430\MSP430.csproj">
      <Project>{ff9e9894-f7e2-464d-b288-4157b864d053}</Project>
      <Name>MSP430</Name>
    </ProjectReference>
    <ProjectReference Include="..\Arch\PaRisc\PaRisc.csproj">
      <Project>{C57B1AD7-336A-4CE6-8A8C-836760029EBB}</Project>
      <Name>PaRisc</Name>
    </ProjectReference>
    <ProjectReference Include="..\Arch\Pdp11\Pdp11.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\PowerPC\PowerPC.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\RiscV\RiscV.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Rl78\Rl78.csproj">
      <Project>{54029784-C8A6-43F5-9D00-62EC8DA04FA1}</Project>
      <Name>Rl78</Name>
    </ProjectReference>
    <ProjectReference Include="..\Arch\Sparc\Sparc.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\SuperH\SuperH.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Tlcs\Tlcs.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Vax\Vax.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\X86.Design\X86.Design.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\X86\X86.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Xtensa\Xtensa.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Z80\Z80.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\zSeries\zSeries.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Assemblers\M68k\M68kAssembler.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Assemblers\Pdp11\Pdp11Assembler.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Assemblers\x86\X86Assembler.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Core\Core.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Decompiler\Decompiler.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Drivers\CmdLine\CmdLine.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\AmigaOS.Design\AmigaOS.Design.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\AmigaOS\AmigaOS.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\AtariTOS\AtariTOS.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\C64\C64.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Cpm\Cpm.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Dreamcast\Dreamcast.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\MacOS\MacOS.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Msdos.Design\Msdos.Design.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Msdos\Msdos.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\NeoGeo\NeoGeo.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Ps3\Ps3.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\RiscOS\RiscOS.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\RT11\RT11.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\SegaGenesis\SegaGenesis.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\SysV\SysV.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Trs80\Trs80.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Wii\Wii.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\Windows\Windows.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Environments\ZX81\ZX81.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Gui\Gui.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\BinHex\BinHex.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\Coff\Coff.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\Dol\Dol.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\Elf\Elf.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\Hunk\Hunk.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\IntelHex\IntelHex.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\Llvm\LLVM.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\MachO\MachO.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\MzExe\MzExe.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\OdbgScript\OdbgScript.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\TypeLib\TypeLib.csproj">
    </ProjectReference>
    <ProjectReference Include="..\ImageLoaders\VmsExe\VmsExe.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Libraries\Libc\Libc.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Libraries\Microchip\Utils\Microchip.Utils.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Libraries\Python\Python.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Arch\Tms7000\Tms7000.csproj">
    </ProjectReference>
    <ProjectReference Include="..\UserInterfaces\WindowsForms\WindowsForms.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Native\NativeProxy.csproj">
    </ProjectReference>
    <ProjectReference Include="..\Symbols\LGSymLoader\LGSymLoader.csproj">
    </ProjectReference>
  </ItemGroup>
  <ItemGroup>
    <DecompilerMetadata Include="$(SolutionDir)Environments\Msdos\*.xml" />
    <DecompilerMetadata Include="$(SolutionDir)Environments\Windows\*.xml" />
    <DecompilerMetadata Include="$(SolutionDir)tools\genPICdb\picdb.zip" />
  </ItemGroup>
  <ItemGroup>
    <ExternalComponents Include="$(SolutionDir)..\external\Capstone.NET\*.dll" />
    <ExternalComponents Include="$(SolutionDir)..\external\Capstone.NET\*.pdb" />
  </ItemGroup>
  <!-- TODO: Duplicated in Common.items -->
  <ItemGroup Condition=" '$(OS)|$(Platform)' == 'Windows_NT|x86'">
    <Architectures Include="$(SolutionDir)Native\build\$(Platform)\$(Configuration)\ArmNative\ArmNative.dll" />
    <Architectures Include="$(SolutionDir)Native\build\$(Platform)\$(Configuration)\ArmNative\ArmNative.pdb" />
    <ExternalComponents Include="$(SolutionDir)..\external\Capstone\X86\capstone*.dll" />
  </ItemGroup>
  <ItemGroup Condition=" '$(OS)|$(Platform)' == 'Windows_NT|x64'">
    <Architectures Include="$(SolutionDir)Native\build\$(Platform)\$(Configuration)\ArmNative\ArmNative.dll" />
    <Architectures Include="$(SolutionDir)Native\build\$(Platform)\$(Configuration)\ArmNative\ArmNative.pdb" />
    <ExternalComponents Include="$(SolutionDir)..\external\Capstone\X64\capstone.dll" />
  </ItemGroup>
  <ItemGroup Condition=" '$(OS)' == 'Unix'">
    <Architectures Include="$(SolutionDir)Native\build\$(Platform)\$(Configuration)\ArmNative\libArmNative.so" />
  </ItemGroup>
  <ItemGroup>
    <None Include="packages.config">
      <SubType>Designer</SubType>
    </None>
  </ItemGroup>
  <Target Name="AfterBuild">
    <Message Importance="normal" Text="Copying Decompiler metadata files to $(TargetDir)" />
    <Copy SourceFiles="@(Architectures)" DestinationFolder="$(TargetDir)" SkipUnchangedFiles="true" />
    <Copy SourceFiles="@(DecompilerMetadata)" DestinationFolder="$(TargetDir)" SkipUnchangedFiles="true" />
    <Copy SourceFiles="@(ExternalComponents)" DestinationFolder="$(TargetDir)" SkipUnchangedFiles="true" />
  </Target>
  <Target Name="EnsureNuGetPackageBuildImports" BeforeTargets="PrepareForBuild">
    <PropertyGroup>
      <ErrorText>This project references NuGet package(s) that are missing on this computer. Use NuGet Package Restore to download them.  For more information, see http://go.microsoft.com/fwlink/?LinkID=322105. The missing file is {0}.</ErrorText>
    </PropertyGroup>
    <Error Condition="!Exists('..\packages\NUnit.3.11.0\build\NUnit.props')" Text="$([System.String]::Format('$(ErrorText)', '..\packages\NUnit.3.11.0\build\NUnit.props'))" />
    <Error Condition="!Exists('..\packages\NUnit3TestAdapter.3.13.0\build\net35\NUnit3TestAdapter.props')" Text="$([System.String]::Format('$(ErrorText)', '..\packages\NUnit3TestAdapter.3.13.0\build\net35\NUnit3TestAdapter.props'))" />
  </Target>
</Project>